# co 第四章

## **4.2** 数据的存放方式

主要内容：数据在REG/MEM/IR中的存放方式、地址及长度的表示。

### 数据在REG中的存放方式（以定点数为例）

基础：REG长度=机器字长=最长数据的长度；

存放方式：

- 长数据：占用REG全部位数；
- 短数据：REG低端，部分REG；**P146**。

地址长度表示：

- 地址：直接按照方案来寻址（REG低端，部分REG）；
- 长度：由操作码op指明；

### 数据在MEM中的存放方式

存放在连续的存储单元中；

- 数据地址：最小存储单元；
- 数据长度：操作码指明；

存放方式：

端序（Endian）：存储时的字节顺序（即N中的内容），有大端MSB、小端LSB 2种；

数据是3210时，

大端：n: 3, n+1: 2, n+2: 1, n+3: 0;

小端：n: 0, n+1: 1, n+2: 2, n+3: 3;

感觉上，**大端更符合常规的思维**。

对齐（Alignment）：边界对齐。

为使结构体数组的各元素都能边界对齐，应有**sizeof(结构体)＝整数*maxsize**=整数\*sizeof(int)；

### 数据在其他部件中的存放方式

指令寄存器中：按照MEM端序，不对齐；

堆栈中：按照MEM端序，对齐；

## 做ppt例题的感想

注意PC+1！算指令地址尤其是相对寻址的时候**PC已经加过1了**。

## 做作业题的感想（含考试题型！）

这一章会考以下几个题型：

1. 简答，没什么办法；
2. 某指令系统中有n种操作，使用频率分别为xxx，分别用定长编码、霍夫曼编码、扩展编码来为操作编码，计算**平均码长**；
3. 指令系统中字长n位，格式有无地址、单地址、双地址、三地址等m种，xx定义了xx种指令，剩下怎么办；
4. 给出指令格式：操作码段+寻址方式段+地址/imme段，寻址方式是xxx这样约定的，给出几个指令分析**OPD/OPD的EA**；再分析执行什么操作（或者指令段执行什么操作）。或者根据后面的 地址/imme段，判断单opd/双opd时哪几种寻址方式可行。然后再推测MEM地址空间，寄存器个数等；
5. 给出一个需求写机器代码，比较变态。